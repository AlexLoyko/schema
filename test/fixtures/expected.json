{
  "settings": {
    "analysis": {
      "analyzer": {
        "peliasAdmin": {
          "type": "custom",
          "tokenizer": "whitespace",
          "char_filter": [
            "punctuation"
          ],
          "filter": [
            "lowercase",
            "asciifolding",
            "trim",
            "word_delimiter",
            "notnull"
          ]
        },
        "peliasOneEdgeGram": {
          "type": "custom",
          "tokenizer": "whitespace",
          "char_filter": [
            "punctuation"
          ],
          "filter": [
            "lowercase",
            "asciifolding",
            "trim",
            "address_stop",
            "ampersand",
            "removeAllZeroNumericPrefix",
            "kstem",
            "peliasOneEdgeGramFilter",
            "unique",
            "notnull"
          ]
        },
        "peliasTwoEdgeGram": {
          "type": "custom",
          "tokenizer": "whitespace",
          "char_filter": [
            "punctuation"
          ],
          "filter": [
            "lowercase",
            "asciifolding",
            "trim",
            "address_stop",
            "ampersand",
            "removeAllZeroNumericPrefix",
            "kstem",
            "peliasTwoEdgeGramFilter",
            "unique",
            "notnull"
          ]
        },
        "peliasPhrase": {
          "type": "custom",
          "tokenizer": "whitespace",
          "char_filter": [
            "punctuation"
          ],
          "filter": [
            "lowercase",
            "asciifolding",
            "trim",
            "ampersand",
            "kstem",
            "street_synonym",
            "direction_synonym",
            "unique",
            "notnull"
          ]
        }
      },
      "filter": {
        "ampersand": {
          "type": "pattern_replace",
          "pattern": "and",
          "replacement": "&"
        },
        "notnull": {
          "type": "length",
          "min": 1
        },
        "peliasOneEdgeGramFilter": {
          "type": "edgeNGram",
          "min_gram": 1,
          "max_gram": 10
        },
        "peliasTwoEdgeGramFilter": {
          "type": "edgeNGram",
          "min_gram": 2,
          "max_gram": 10
        },
        "removeAllZeroNumericPrefix": {
          "type": "pattern_replace",
          "pattern": "^(0*)",
          "replacement": ""
        },
        "address_stop": {
          "type": "stop",
          "stopwords": [
            "alley",
            "annex",
            "avenue",
            "bay",
            "bayou",
            "beach",
            "beltway",
            "bend",
            "bluff",
            "bluffs",
            "boulevard",
            "bottom",
            "branch",
            "bridge",
            "brook",
            "bypass",
            "canyon",
            "cape",
            "causeway",
            "center",
            "channel",
            "circle",
            "cliff",
            "club",
            "common",
            "commons",
            "connector",
            "corridor",
            "course",
            "cove",
            "creek",
            "crescent",
            "crest",
            "crossing",
            "crossroad",
            "crossroads",
            "curve",
            "dale",
            "dam",
            "drive",
            "esplanade",
            "expressway",
            "extended",
            "falls",
            "ferry",
            "field",
            "fields",
            "flat",
            "flats",
            "ford",
            "forest",
            "forge",
            "fork",
            "forks",
            "freeway",
            "garden",
            "gardens",
            "gateway",
            "glen",
            "glenn",
            "green",
            "grove",
            "harbor",
            "haven",
            "heights",
            "highway",
            "hill",
            "hills",
            "hollow",
            "isle",
            "junction",
            "key",
            "keys",
            "knoll",
            "knolls",
            "landing",
            "lane",
            "light",
            "lights",
            "lock",
            "locks",
            "manor",
            "meadow",
            "meadows",
            "mews",
            "mill",
            "mills",
            "mountain",
            "motorway",
            "neck",
            "orchard",
            "parade",
            "parkway",
            "passage",
            "pier",
            "pike",
            "pine",
            "pines",
            "place",
            "plaza",
            "promenade",
            "ranch",
            "ridge",
            "ridges",
            "river",
            "road",
            "route",
            "row",
            "shore",
            "shores",
            "skyway",
            "spring",
            "springs",
            "square",
            "street",
            "terrace",
            "trail",
            "trafficway",
            "tunnel",
            "turnpike",
            "valley",
            "vista",
            "village",
            "viaduct",
            "way"
          ]
        },
        "street_synonym": {
          "type": "synonym",
          "synonyms": [
            "alley => aly",
            "annex => anx",
            "avenue => ave",
            "bayou => byu",
            "beach => bch",
            "bend => bnd",
            "bluff => blf",
            "bluffs => blfs",
            "bottom => btm",
            "boulevard => blvd",
            "branch => br",
            "bridge => brg",
            "brook => brk",
            "bypass => byp",
            "canyon => cyn",
            "cape => cp",
            "causeway => cswy",
            "center => ctr",
            "channel => chnnl",
            "circle => cir",
            "cliff => clf",
            "close => cl",
            "club => clb",
            "common => cmn",
            "commons => cmns",
            "connector => con",
            "corridor => cor",
            "course => crse",
            "court => ct",
            "cove => cv",
            "creek => crk",
            "crescent => cres",
            "crest => crst",
            "crossing => xing",
            "crossroad => xrd",
            "crossroads => xrds",
            "curve => curv",
            "dale => dl",
            "dam => dm",
            "drive => dr",
            "esplanade => esp",
            "expressway => expy",
            "extended => ext",
            "falls => fls",
            "ferry => fry",
            "field => fld",
            "fields => flds",
            "flat => flt",
            "flats => flts",
            "ford => frd",
            "forest => frst",
            "forge => frg",
            "fork => frk",
            "forks => frks",
            "freeway => fwy",
            "garden => gdn",
            "gardens => gdns",
            "gateway => gtwy",
            "glen => gln",
            "glenn => gln",
            "green => grn",
            "grove => grv",
            "harbor => hbr",
            "haven => hvn",
            "heights => hts",
            "highway => hwy",
            "hill => hl",
            "hills => hls",
            "hollow => holw",
            "isle => is",
            "junction => jct",
            "key => ky",
            "keys => kys",
            "knoll => knl",
            "knolls => knls",
            "landing => lndg",
            "lane => ln",
            "light => lgt",
            "lights => lgts",
            "lock => lck",
            "locks => lcks",
            "manor => mnr",
            "meadow => mdw",
            "meadows => mdws",
            "mill => ml",
            "mills => mls",
            "mountain => mnt",
            "motorway => mtwy",
            "neck => nck",
            "orchard => orch",
            "parkway => pkwy",
            "pasage => psge",
            "pier => pr",
            "pine => pne",
            "pines => pnes",
            "place => pl",
            "plaza => plz",
            "ranch => rnch",
            "ridge => rdg",
            "ridges => rdgs",
            "river => riv",
            "road => rd",
            "route => rte",
            "shore => shr",
            "shores => shrs",
            "skyway => skwy",
            "spring => spg",
            "springs => spgs",
            "square => sq",
            "street => st",
            "suite => ste",
            "terrace => terr",
            "trail => tr",
            "trafficway => trfy",
            "tunnel => tunl",
            "turnpike => tpke",
            "valley => vly",
            "vista => vis",
            "village => vlg",
            "way => wy"
          ]
        },
        "direction_synonym": {
          "type": "synonym",
          "synonyms": [
            "north => n",
            "south => s",
            "east => e",
            "west => w",
            "southwest => sw",
            "southeast => se",
            "northwest => nw",
            "northeast => ne"
          ]
        }
      },
      "char_filter": {
        "punctuation": {
          "type": "mapping",
          "mappings": [
            ",=>",
            ".=>",
            "`=>",
            "_=>",
            "==>",
            "?=>",
            "'=>",
            "|=>",
            "\"=>",
            "(=>",
            ")=>",
            "{=>",
            "}=>",
            "[=>",
            "]=>",
            "<=>",
            ">=>",
            "*=>",
            "#=>",
            "^=>",
            "$=>",
            "@=>",
            "!=>",
            "~=>",
            ":=>",
            ";=>",
            "+=>",
            "/=>",
            "\\\\=>",
            "《=>",
            "》=>",
            "—=>",
            "－=>",
            "，=>",
            "。=>",
            "、=>",
            "：=>",
            "；=>",
            "！=>",
            "·=>",
            "？=>",
            "“=>",
            "”=>",
            "）=>",
            "（=>",
            "【=>",
            "】=>",
            "［=>",
            "］=>",
            "●=>"
          ]
        }
      }
    },
    "index": {
      "number_of_replicas": "999",
      "number_of_shards": "1",
      "index_concurrency": "10"
    }
  },
  "mappings": {
    "_default_": {
      "properties": {
        "source": {
          "type": "string",
          "index_analyzer": "keyword",
          "search_analyzer": "keyword",
          "store": "yes"
        },
        "layer": {
          "type": "string",
          "index_analyzer": "keyword",
          "search_analyzer": "keyword",
          "store": "yes"
        },
        "name": {
          "type": "object",
          "dynamic": true
        },
        "phrase": {
          "type": "object",
          "dynamic": true
        },
        "address": {
          "type": "object",
          "dynamic": true,
          "index": "no"
        },
        "alpha3": {
          "type": "string",
          "analyzer": "peliasAdmin",
          "store": "yes"
        },
        "admin0": {
          "type": "string",
          "analyzer": "peliasAdmin",
          "store": "yes"
        },
        "admin1": {
          "type": "string",
          "analyzer": "peliasAdmin",
          "store": "yes"
        },
        "admin1_abbr": {
          "type": "string",
          "analyzer": "peliasAdmin",
          "store": "yes"
        },
        "admin2": {
          "type": "string",
          "analyzer": "peliasAdmin",
          "store": "yes"
        },
        "local_admin": {
          "type": "string",
          "analyzer": "peliasAdmin",
          "store": "yes"
        },
        "locality": {
          "type": "string",
          "analyzer": "peliasAdmin",
          "store": "yes"
        },
        "neighborhood": {
          "type": "string",
          "analyzer": "peliasAdmin",
          "store": "yes"
        },
        "center_point": {
          "type": "geo_point",
          "lat_lon": true,
          "geohash": true,
          "geohash_prefix": true,
          "geohash_precision": 18,
          "fielddata": {
            "loading": "eager_global_ordinals"
          }
        },
        "shape": {
          "type": "geo_shape",
          "tree": "quadtree",
          "tree_levels": "20"
        },
        "source_id": {
          "type": "string",
          "index_analyzer": "keyword",
          "search_analyzer": "keyword",
          "store": "yes"
        },
        "category": {
          "type": "string",
          "index_analyzer": "keyword",
          "search_analyzer": "keyword",
          "store": "yes"
        },
        "population": {
          "type": "long",
          "null_value": 0
        },
        "popularity": {
          "type": "long",
          "null_value": 0
        }
      },
      "dynamic_templates": [
        {
          "nameGram": {
            "path_match": "name.*",
            "match_mapping_type": "string",
            "mapping": {
              "type": "string",
              "analyzer": "peliasTwoEdgeGram",
              "fielddata": {
                "format": "fst",
                "loading": "eager_global_ordinals"
              }
            }
          }
        },
        {
          "phrase": {
            "path_match": "phrase.*",
            "match_mapping_type": "string",
            "mapping": {
              "type": "string",
              "analyzer": "peliasPhrase",
              "fielddata": {
                "loading": "eager_global_ordinals"
              }
            }
          }
        }
      ],
      "_source": {
        "excludes": [
          "shape",
          "phrase"
        ]
      },
      "_all": {
        "enabled": false
      },
      "dynamic": "true"
    },
    "admin0": {
      "dynamic_templates": [
        {
          "nameGram": {
            "path_match": "name.*",
            "match_mapping_type": "string",
            "mapping": {
              "type": "string",
              "analyzer": "peliasOneEdgeGram",
              "fielddata": {
                "format": "fst",
                "loading": "eager_global_ordinals"
              }
            }
          }
        }
      ]
    },
    "admin1": {
      "dynamic_templates": [
        {
          "nameGram": {
            "path_match": "name.*",
            "match_mapping_type": "string",
            "mapping": {
              "type": "string",
              "analyzer": "peliasOneEdgeGram",
              "fielddata": {
                "format": "fst",
                "loading": "eager_global_ordinals"
              }
            }
          }
        }
      ]
    },
    "admin2": {
      "dynamic_templates": [
        {
          "nameGram": {
            "path_match": "name.*",
            "match_mapping_type": "string",
            "mapping": {
              "type": "string",
              "analyzer": "peliasOneEdgeGram",
              "fielddata": {
                "format": "fst",
                "loading": "eager_global_ordinals"
              }
            }
          }
        }
      ]
    }
  }
}
